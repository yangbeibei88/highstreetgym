extends layout.pug

block content 
  .page-wrapper
    header.bg-darkCyan.text-white
      .container.mx-auto.px-4.pt-3(class='md:px-0 md:py-4')
        h1 Blog
        p Read articles from our gym members!
    .wrapper.bg-slate-100
      .container.grid.grid-cols-1.gap-4.py-5.px-4.mx-auto(class='md:px-0 md:grid-cols-3')
        // 2) MAIN CONTENT
        main#blog.col-span-1.order-2(class='md:col-span-2')
          .flex.flex-col.space-y-4
            -for(let item of articles)
              article.flex.flex-col.rounded-lg.bg-white.shadow(class='md:flex-row md:space-x-4')
                img.max-h-52.object-cover.rounded-t-lg(src=`/images/blog/${item.imageCover}` alt=`${item.articleTitle}` class='md:max-h-full md:rounded-tr-none md:rounded-l-lg md:w-1/3')
                .w-full.py-4.px-2.flex.flex-col(class='md:w-2/3')
                  small.text-xs.font-semibold.bg-orange-700.text-white.rounded-full.w-fit.px-3.py-1 #{item.topicName}
                  h2.text-xl
                    | #{item.articleTitle}
                  .shortDesc
                    .line-clamp-3 !{item.articleContent}
                  .w-full.flex.flex-col.items-center.justify-between(class='lg:flex-row')
                    .flex.items-center.space-x-2.mr-auto
                      img.size-8.rounded-full.object-cover(src=`/images/users/${item.avatar}` alt=`${item.firstName}` class='md:size-12')
                      small.text-xs
                        | #{item.firstName}
                        | #{item.lastName}
                      small.text-xs #{item.createdAt.toLocaleDateString('en-AU')}
                    a.btn-bullet.btn-limeGreen.btn-sm.ml-auto(href=`/blog/${item.articleId}`)
                      | Read
                      | More &gt;&gt;
        // 3) FILTER
        aside.order-1
          .space-y-4
            // SORT SELECT DROPDOWN
            section#sortBy
              h2.text-sm.font-semibold
                | Sort
              select#topic-select(name='sort')
                option(value='0')
                  | --Sort---
                option(value='1')
                  | Newest to Oldest
                option(value='2')
                  | Oldest to Newest
            // FILTER CHECKBOX
            // TODO: add js to close filter on mobile
            section.filterBy
              h2.text-sm.font-semibold
                | Filters
              details.bg-white.p-2.border.rounded.border-gray-300
                summary.font-semibold.pb-1
                  | By Topic
                - for(let t of topics)
                  .space-x-1
                    input(type='checkbox' name='topic' id=`${t.topicId}`)
                    label(for=`${t.topicId}`) #{t.topicName} (#{t.count})
